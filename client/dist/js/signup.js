const form=document.querySelector("form"),submitBtn=document.querySelector("button"),warning=document.querySelector(".warning"),loading=document.querySelector(".loading");async function submitHandler(t){t.preventDefault();const n=new FormData(form),e=new RegExp(/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/);let a="";if(e.test(n.get("email"))||(a+="请输入有效的电子邮箱地址。</br>"),n.get("confirm_email")?n.get("email")!==n.get("confirm_email")&&(a+="请在两个电子邮件地址字段中输入相同的地址。</br>"):a+="请填写确认电子邮箱字段。</br>","on"!==n.get("agree")&&(a+="您必须同意《Steam订户协议》才能继续。</br>"),""===a?warning.style.display="none":warning.style.display="block",!(warning.innerHTML=a)){t.target.style.display="none",loading.style.display="block";let e=await fetch("http://127.0.0.1:4010/signup",{method:"post",body:n});(e=await e.json()).result&&(window.sessionStorage.email=n.get("email"),setTimeout(function(){location.href="../html/join.html"},2e3*Math.random()+2e3))}}submitBtn.addEventListener("click",submitHandler);